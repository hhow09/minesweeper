# Minesweeper

Implement the classic Windows game Minesweeper with React.

[Live Demo](https://hhow09.github.io/minesweeper/)

## Rules

1. Clicking a mine ends the game.
2. Clicking a square with an adjacent mine clears that square and shows the number of mines touching it.
3. Clicking a square with no adjacent mine clears that square and clicks all adjacent squares.
4. The first click will never be a mine.
5. It will clear the map and place numbers on the grid.
6. The numbers reflect the number of mines touching a square.

## Instruction

1. Adjust Board Config
2. Click `Start`
3. `Left Click` to open a cell
4. `Right Click` to flag a cell (suspicious mine)

## Documentation

### 1. Config

- Board Width: how many columns of a board
- Board Height: how many rows of a board
- Bomb Probability: the probability of whether a cell is a mine
- Show Log: show the log of function execution in Devtool console panel

### 2. Prepare Board

![prepare Board](https://github.com/hhow09/minesweeper/blob/master/flowchart/prepare-board.png?raw=true)

#### Create Board Matrix

generate 2D array of board state based on `Board Width` and `Board Height`. Each element contains a least basic properties of a cell: `opened`, `isBomb`, `adjBombNum` and `flagged`.

#### Place Bombs

iterate through every cell of board state and performs following actions respectively.

1. randomly set `isBomb` to `true` based on `Bomb Probability`.
2. if set bomb, update `adjBombNum` of adjacent cells.

### 3. Click A Cell

![Click A Cell](https://github.com/hhow09/minesweeper/blob/master/flowchart/click-a-cell.png?raw=true)

#### Right Click

Flag / Unflag a cell

#### Left Click

- Each following conditions performs `setBoardState` only once.
- the corresponding new state is generated by pipes of pure function: `handleFirstBomb`, `openCell`, `openAdjacentSafeCells`, `openBomb`, `doSideEffect`, `getState` in `helper.js`.
  - handleFirstBomb: Given a boardState and cell location, modify the cell to normal cell and update adjBombNum of adjacent cells.
  - openAdjacentSafeCells: Given a boardState and cell location, Using Depth-First-Search get all adjacent cells of `adjBombNum===0`, then set these cell state `opened=true`.
  - openCell: Given a boardState and cell location, set the given cell state `opened=true`
  - openBomb: Given a boardState and cell location, set the given cell state `opened=true` & `background="red"`
  - doSideEffect: Use the information of previous function, do something then return as input. Here use to get count of openAdjacentSafeCells.
  - getState: return boardState

##### Condition: First Click && is mine && adjacentMines==0

##### Condition: First Click && is mine && adjacentMines>0

##### Condition: Normal cell && adjacentMines==0

##### Condition: Normal cell && adjacentMines>0

##### Condition: Not first Click && is mine

### 4. Check Board Status

![check board status](https://github.com/hhow09/minesweeper/blob/master/flowchart/check-board-status.png?raw=true)
